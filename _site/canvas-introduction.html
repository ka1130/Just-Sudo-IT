<!DOCTYPE html>
<html class="no-js">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Just sudo IT | The canvas API</title>
    <meta name="description" content="Two posts ago I promised to tell you something more about the HTML5 technology that I use to draw and animate Boids, that is the &lt;canvas&gt; element. As y...">

    <link rel="stylesheet" href="/css/main.css">

    <link rel="canonical" href="http://localhost:4000/canvas-introduction">
    <link rel="alternate" type="application/rss+xml" title="Just sudo IT" href="http://localhost:4000/feed.xml" />
    <link rel="shortcut icon" type="image/png" href="/favicon.png" >
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
    <!--[if lt IE 9]>
        <script src="/js/vendor/html5shiv.min.js"></script>
    <![endif]-->
</head>


  <body class="">
    <!-- if the user has javascript disabled they can still use the menu -->
<noscript>
    <div class="no-js-menu clearfix">
        <ul>
            
                <li><i class="fa fa-home"></i><a href="/">Home</a></li>
            
                <li><i class="fa fa-anchor"></i><a href="/about">About</a></li>
            
                <li><i class="fa fa-user"></i><a href="/author/kamila">Author</a></li>
            
        </ul>
    </div>
</noscript>
<!-- end no script -->

    <header class="hero-image" style='background-image: url(/img/feature-canvas.jpg);'>
    <span class="menu-trigger animated fadeInDown">
        <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
    </span>

    <div id="menu-target">
    <ul>
        
            <li><i class="fa fa-home"></i><a href="/">Home</a></li>
        
            <li><i class="fa fa-anchor"></i><a href="/about">About</a></li>
        
            <li><i class="fa fa-user"></i><a href="/author/kamila">Author</a></li>
        
    </ul>
</div>

</header>

<main class="container">
    <div class="row">
        <div class="col-xs-12 col-md-8 single-content-sidebar">

            <h1>The canvas API</h1>

            <p>Two posts ago I promised to tell you something more about the HTML5 technology that I use to draw and animate Boids, that is the <code class="highlighter-rouge">&lt;canvas&gt;</code> element. As you have probably guessed, it is basically just an HTML tag - but its possibilities are truly impressive. With the use of a simple <code class="highlighter-rouge">&lt;canvas&gt;</code> element and JavaScript you can create advanced games, multimedia applications, charting - and much more. This is because canvas is very fast and efficient so it can perform complicated calculations and animations. Since canvas is a pixel-based API, you can go as far as manipulating pixels, creating for instance some impressive filters for your photos. The possibilities are endless!</p>

<h2 id="overview">Overview</h2>

<p>The canvas API itself is not really complicated in terms of the amount of knowledge to grasp. All the methods and properties are nicely put together on the <a href="https://www.w3schools.com/tags/ref_canvas.asp">w3schools reference</a>. Yes, I am aware of the <a href="https://www.impressivewebs.com/w3schools-ugly-bad-good/">controversy behind w3schools</a> and I admit it’s definitely not the ultimate choice for learning but when it comes to getting to know HTML5, especially if you’re fresh to some of its features, it’s a nice start. Having said that, you should definitely check out the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">MDN documentation for canvas</a> which provides you with in-depth information on all the API’s features.</p>

<p>Basically, the canvas API consists of a set of <strong>functions</strong> and <strong>properties</strong>. <strong>Functions</strong> can be divided as per their purpose like so:</p>
<ul>
  <li><strong>line and shape</strong> functions (for example: <code class="highlighter-rouge">arc</code>, <code class="highlighter-rouge">fill</code>, <code class="highlighter-rouge">rect</code>, <code class="highlighter-rouge">stroke</code> etc.)</li>
  <li><strong>text</strong> functions (<code class="highlighter-rouge">fillText</code>, <code class="highlighter-rouge">measureText</code>, <code class="highlighter-rouge">strokeText</code>)</li>
  <li><strong>transform</strong> functions (<code class="highlighter-rouge">save</code>, <code class="highlighter-rouge">restore</code>, <code class="highlighter-rouge">rotate</code>, <code class="highlighter-rouge">scale</code>, <code class="highlighter-rouge">transform</code>, <code class="highlighter-rouge">translate</code>)</li>
</ul>

<p>In addition to the functions, canvas API provides you with a set of <strong>properties</strong> that are basically designed to let you style the elements before they get drawn on canvas. Some of these properties are: <code class="highlighter-rouge">width</code>, <code class="highlighter-rouge">height</code>, <code class="highlighter-rouge">font</code>, <code class="highlighter-rouge">fillStyle</code>, <code class="highlighter-rouge">globalAlpha</code>, <code class="highlighter-rouge">globalCompositeOperations</code>.</p>

<p>OK, let’s get down to actual coding so that you can check yourself how to make use of canvas. Once you get the knack of it, I promise, you’ll have fun!</p>

<h2 id="basic-usage">Basic usage</h2>

<p>First, let’s insert canvas on our website. In a place of your choice simply put:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">canvas</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"myCanvas"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"400"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"400"</span>
	<span class="nx">Your</span> <span class="nx">browser</span> <span class="nx">does</span> <span class="nx">not</span> <span class="nx">support</span> <span class="nx">canvas</span>
<span class="o">&lt;</span><span class="sr">/canvas&gt;</span></code></pre></figure>
<p><br />
No need to say that the above id, width, height and fallback text is up to you. You might be tempted to omit width and height and choose to style those in CSS but don’t do that, it won’t work. You need to define width and height directly inside of the <code class="highlighter-rouge">&lt;canvas&gt;</code> tag - or in JavaScript. Anyways, it’s best to start from setting initial values here, in HTML. I would also suggest adding some basic styling to the canvas so that you can see clearly where it is. Let’s move to the stylesheet and add some CSS declarations like:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">#</span><span class="nx">myCanvas</span> <span class="p">{</span>
    <span class="nl">border</span><span class="p">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">black</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>
<p><br />
Now that we have our bare canvas placed on the layout, it’s time to jump into the JavaScript file. First, we need to catch our canvas to a variable. Let’s make use of the new variable declarations introduced by ES6 (more on that in the future post, I plan to show you all the ES6 features I use in the Boids project).</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"myCanvas"</span><span class="p">);</span></code></pre></figure>
<p><br />
Now we need to define the context in which we want to work. In most of the cases, you will need a 2D context. The canvas element has a special method for that called <code class="highlighter-rouge">getContext</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">"2d"</span><span class="p">);</span></code></pre></figure>
<p><br />
Finally, let’s draw something simple like a rectangle:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span></code></pre></figure>
<p><br />
The <code class="highlighter-rouge">fillRect()</code> method takes four parameters: <code class="highlighter-rouge">x</code>, <code class="highlighter-rouge">y</code>, <code class="highlighter-rouge">width</code> and <code class="highlighter-rouge">height</code>. The x and y coordinates define the rectangle’s upper-left corner’s position. The default color is black, that’s why you can see a black rectangle on your canvas now even though you didn’t set any styling. Actually if you do want to style your components anyhow, you should define the visual side first. Let’s add some colour to our rectangle, say, orange for example. Now the code will look like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#ffa500"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span></code></pre></figure>
<p><br />
The same way, you can create a rectangle with a stroke, defining its color first:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#ffa500"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s2">"#005aff"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span></code></pre></figure>
<p><br />
This will add a blue stroke to your initial rectangle. You might want to alter the stroke’s width - and that’s simple too. The only thing it takes is a <code class="highlighter-rouge">lineWidth</code> method where you define the line’s width in pixels and pass it as a numeric value like so:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#ffa500"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s2">"#005aff"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span></code></pre></figure>
<p><br />
Cool, you get the point! The very introduction is behind us, let’s move on to other shapes.</p>

<h2 id="run-rings-around-the-squares">Run rings around the squares!</h2>

<p>Time for something slightly more complex: curves. In the case of Boids I initially wanted to represent them as simple circles. To do that, we need the <code class="highlighter-rouge">arc</code> method that lets you draw curves, ovals and circles. As you remember, we need to define styles first. How about some spring colors and stroke of 5px?</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#bcd664"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s2">"#54a244"</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span></code></pre></figure>
<p><br />
Now we need a method to start the path:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></code></pre></figure>
<p><br />
…and draw a curve using the canvas <code class="highlighter-rouge">arc</code> method. The <code class="highlighter-rouge">arc</code> method takes 5 obligatory parameters and 1 optional. These are:</p>
<ul>
  <li><strong>x</strong> (the x-coordinate of the center of the circle)</li>
  <li><strong>y</strong> (the y-coordinate of the center of the circle)</li>
  <li><strong>r</strong> (the radius)</li>
  <li><strong>sAngle</strong> (the starting angle, in radians, where 0 is at the 3 o’clock position of the arc’s circle)</li>
  <li><strong>eAngle</strong> (the ending angle, in radians)</li>
  <li><strong>counterclockwise</strong> (this one is optional and takes a boolean value: <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>)</li>
</ul>

<p>Let’s imagine we’d like the arc to be drawn in the middle of the canvas, with the radius of 20px, taking 90 degrees. Calculating radians may be a bit counterintuitive for you (it is for me!) so why not get ourselves a little helper function that will take degrees and return radians? Like so:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">calculateRadians</span><span class="p">(</span><span class="nx">degrees</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">degrees</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>
<p><br />
Now let’s move back to our arc and draw it!</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">calculateRadians</span><span class="p">(</span><span class="mi">90</span><span class="p">));</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span></code></pre></figure>
<p><br />
A riddle for you: how to draw a circle with fill only, no stroke, as in the case of rough-and-ready Boids. Yeah, I know that you know. :)</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#bcd664"</span><span class="p">;</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">calculateRadians</span><span class="p">(</span><span class="mi">360</span><span class="p">));</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span></code></pre></figure>
<p><br /></p>

<h2 id="lets-animate-it">Let’s animate it!</h2>

<p>Last thing I’m gonna show you is a simple animation that will get you familiarized with some concepts of moving elements around on canvas. Basically, drawing on canvas consists in sequential clearing the canvas and redrawing the element on a new position. In case you perform any transformations on the element while animating it, you will also need to store and restore the canvas. We won’t transfigure our circle anyhow so we can skip these steps.</p>

<p>To schedule the updates you can use one of the following functions: <code class="highlighter-rouge">setTimeout(fn, delay)</code>, <code class="highlighter-rouge">setInterval(fn, delay)</code> or<code class="highlighter-rouge"> requestAnimationFrame(callback)</code>. I suggest you go for the third option since it’s best in terms of performance of your animation. Paul Irish explained very nicely <a href="https://www.paulirish.com/2011/requestanimationframe-for-smart-animating/">the way requestAnimationFrame() method works</a> and why to choose it over <code class="highlighter-rouge">setTimeout()</code> or <code class="highlighter-rouge">setInterval</code>. The post is old but still valid, just the support of the browser is now almost complete. It’s just Opera Mini that doesn’t understand the deal. Anyways, has anyone of you ever used Opera Mini? Personally, I don’t even know how dude looks like!. ;)</p>

<p>OK, so how to use the <code class="highlighter-rouge">requestAnimationFrame()</code> method? We use it on a global object (that is, in our case, window) and we pass it a callback function which will run each time the browser performs drawing on the screen. So here’s the basic syntax:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">callbackFunction</span><span class="p">);</span></code></pre></figure>
<p><br />
Which is, as you know, the same thing as:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">callbackFunction</span><span class="p">);</span></code></pre></figure>
<p><br />
With that in mind, let’s write a core for our <code class="highlighter-rouge">animate()</code> function which will run the <code class="highlighter-rouge">requestAnimationFrame()</code> method, calculate next position and then re-draw it.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
        <span class="c1">// calculate next position
</span>
    <span class="nx">draw</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>
<p><br />
Next, let’s define the <code class="highlighter-rouge">draw()</code> function. It will be running in a multiple sequence so the first thing you need to do is clear the canvas before re-drawing the element on the next position. To clear the canvas, you need to run the <code class="highlighter-rouge">clearRect()</code> method on the canvas’ context (as you remember, we keep it in a variable called <code class="highlighter-rouge">ctx</code>). The <code class="highlighter-rouge">clearRect()</code> method takes the following parameters:</p>
<ul>
  <li><strong>x</strong> (the x-coordinate of the upper-left corner of the rectangle to clear)</li>
  <li><strong>y</strong> (the y-coordinate of the upper-left corner of the rectangle to clear)</li>
  <li><strong>width</strong> (of the rectangle to clear, in px: in our case this will be the width of the whole canvas)</li>
  <li><strong>height</strong></li>
</ul>

<p>Now, the foundation of your <code class="highlighter-rouge">draw()</code> function will look like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
	    <span class="c1">//drawing goes here
</span>
<span class="p">}</span>
<span class="nx">animate</span><span class="p">();</span></code></pre></figure>
<p><br />
Having this basis, let’s think of how we will actually deal with moving our element around. For the very beginning, we’ll move the element on x-coordinate only asking it to revert the direction of the movement once the element hits the border of the canvas. We need three variables: <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> for initial position and <code class="highlighter-rouge">speed</code> for… yeah, the speed. :)
Let’s declare these at the very beginning, above the <code class="highlighter-rouge">animate()</code> and <code class="highlighter-rouge">draw()</code> functions:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span></code></pre></figure>
<p><br />
At this moment we can complete the <code class="highlighter-rouge">draw()</code> function and make it draw a circle like we did before in this tutorial:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#bcd664"</span><span class="p">;</span>

	<span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">calculateRadians</span><span class="p">(</span><span class="mi">360</span><span class="p">));</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>
<p><br />
Finally, we will move the circle on the x-axis by incrementing the <code class="highlighter-rouge">x</code> variable which defines the circle’s horizontal position:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
    <span class="nx">x</span> <span class="o">+=</span> <span class="nx">speed</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;=</span> <span class="mi">40</span> <span class="o">||</span> <span class="nx">x</span> <span class="o">&gt;=</span> <span class="mi">360</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">speed</span> <span class="o">=</span> <span class="o">-</span><span class="nx">speed</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">draw</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>
<p><br />
OK, what’s going on here and where do these <code class="highlighter-rouge">40</code> and <code class="highlighter-rouge">360</code> values come from? As you remember, the canvas width and height are both equal to 400px. The circle’s width is 40px and we start to draw the center of it at <code class="highlighter-rouge">(40, 40)</code> position. This means the circle will hit the left border of canvas at <code class="highlighter-rouge">(40, 40)</code> position and the right border at <code class="highlighter-rouge">(360, 40)</code> (the canvas’ width minus 40px). These two are the moments when we want to revert the direction of the movement.</p>

<p>Let’s have a look at the final code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"myCanvas"</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">"2d"</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">calculateRadians</span><span class="p">(</span><span class="nx">degrees</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">degrees</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>

    <span class="nx">x</span> <span class="o">+=</span> <span class="nx">speed</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;=</span> <span class="mi">40</span> <span class="o">||</span> <span class="nx">x</span> <span class="o">&gt;=</span> <span class="mi">360</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">speed</span> <span class="o">=</span> <span class="o">-</span><span class="nx">speed</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">draw</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"#bcd664"</span><span class="p">;</span>

    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">calculateRadians</span><span class="p">(</span><span class="mi">360</span><span class="p">));</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">animate</span><span class="p">();</span></code></pre></figure>
<p><br /></p>

<p>At this moment you should see your circle rolling around your canvas from one side to another - and back. Now you can play with the speed, y-axis position and much more. Have fun! :)</p>

<h2 id="further-reading">Further reading</h2>

<p>I have only touched the very surface of canvas’ possibilities and I’m sure you’ll want much more. Here’s a generous handful of really nice recourses that will help you dive deeper into canvas’ features:</p>

<ul>
  <li>This is a big one! A <a href="http://codetheory.in/20-best-canvas-tutorials-and-examples-that-will-make-you-a-canvas-master/">selection of top-notch tutorials for any-level coders</a>. Thank you, <a href="http://codetheory.in/">Code Theory</a>! :)</li>
  <li>A great <a href="http://diveintohtml5.info/canvas.html">step-by-step guide by DiveIntoHTML5</a>. As a side note, I encourage you to check out all the <a href="http://diveintohtml5.info/index.html">DiveIntoHTML5 series</a>, Mark Pilgrim did an excellent job explaining all the HTML5 particularities in a creative yet not overwhelming form.</li>
  <li><a href="http://creativejs.com/2011/08/31-days-of-canvas-tutorials/">A 31-days canvas challenge</a>. Good way to stay on track in the learning process.</li>
</ul>

<h2 id="how-are-boids-flying-on-canvas">How are Boids flying on canvas?</h2>

<p>If you’re curious how I’m doing with the Boids, check it out here:</p>
<ul>
  <li><a href="https://github.com/ka1130/Boids">the source code on GitHub</a>. You can find out how I applied the methods described in the above tutorial to animate Boid instances on canvas. I will be glad to hear your tips on that!</li>
  <li><a href="https://ka1130.github.io/Boids/src/">Boids online</a></li>
</ul>

<p>That’s it for now, hope you’ve enjoyed this little playground, see you back soon! :)</p>



        </div>
        <!-- main-content/col -->

        <div class="col-xs-12 col-md-3 col-md-offset-1 single-content-sidebar-area">

            <img src='/img/kamila.jpg' class="user-icon " alt="user-image">
            <div class="meta">

                <div class="sidebar-info">
                    <a href="/author/kamila">Kamila</a> in <a href='/category/dsp2017'>Dsp2017</a>
                </div>

                <div class="sidebar-readtime">
                    <i class="fa fa-bookmark"></i> 30 minute read
                </div>

            </div>

            <h2 class="favorites">Similar Posts</h2>

              <div class="similar-post">
                <a href="/coders-lab">
                    <h3>Coders Lab: an alumn's opinion</h3>
                </a>
        </div>
           <div class="similar-post">
                <a href="/taking-it-slower">
                    <h3>Taking it slower</h3>
                </a>
        </div>
           <div class="similar-post">
                <a href="/reasons-for-changing-career-path">
                    <h3>Why I changed my career path</h3>
                </a>
        </div>
           <div class="similar-post">
                <a href="/es6-in-the-boids-project">
                    <h3>6 ES6 features I use in the Boids project (and work great anywhere!)</h3>
                </a>
        </div>
           <div class="similar-post">
                <a href="/gulp-introduction">
                    <h3>A Gulp of Node.js</h3>
                </a>
        </div>
                   


    </div>

    </div>
    <!--/row -->

    <div class="row">
        <div class="col-xs-12 col-md-8 single-content-sidebar">
            
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function() {
                    this.page.url = "http://just-sudo-it.pl/canvas-introduction"; // <--- use canonical URL
                    this.page.identifier = "/canvas-introduction";
                };

                (function() { // DON'T EDIT BELOW THIS LINE
                    var d = document,
                        s = d.createElement('script');
                    s.src = 'https://just-sudo-it.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> 
        </div>
    </div>

</main>
<!-- /container -->

<footer class="single">
    <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-2">
            <img src="/img/kamila.jpg" class="user-icon " alt="user-image">
        </div>
        <div class="col-xs-12 col-sm-6">
            <div class="category-list">
                <p>Published <span>Mar 30, 2017</span></p>
                <p><a href="/author/kamila">Kamila</a> in <a href='/category/dsp2017'>Dsp2017</a></p>

                <div class="other-catergories">
                    <h3>Also found in</h3>

                    <ul>
                        
                        <li>
                            <a href='/category/dsp2017'>Dsp2017</a>
                            
                        </li>
                        
                    </ul>
                </div>

            </div>
        </div><!-- end col -->
        <div class="col-xs-12 col-sm-4">
            <div class="social">
                <p>Share this article</a>
                <div class="social-links">
                    <a class="social-icon" href="#" data-platform="twitter" data-message="" data-url="http://localhost:4000/canvas-introduction"><i class="fa fa-twitter"></i></a>

                    <a class="social-icon" href="#" data-platform="facebook" data-message="" data-url="http://localhost:4000/canvas-introduction"><i class="fa fa-facebook-official"></i></a>
                    <a class="social-icon" data-platform="mail"  href="mailto:ka1130@o2.pl?body=http://localhost:4000/canvas-introduction"><i class="fa fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </div><!-- end row -->
</div>
  <div class="row read-another-section">
    
        
        <a href="/coders-lab"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-coderslab.jpg'>
            <h3 class="read-another">Coders Lab: an alumn's opinion</h3>
        </div></a>
        
    
        
        <a href="/taking-it-slower"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-slow.jpg'>
            <h3 class="read-another">Taking it slower</h3>
        </div></a>
        
    
        
        <a href="/reasons-for-changing-career-path"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-career.jpg'>
            <h3 class="read-another">Why I changed my career path</h3>
        </div></a>
        
    
        
        <a href="/es6-in-the-boids-project"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-es6.jpg'>
            <h3 class="read-another">6 ES6 features I use in the Boids project (and work great anywhere!)</h3>
        </div></a>
        
    
        
        <a href="/gulp-introduction"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-gulp.jpg'>
            <h3 class="read-another">A Gulp of Node.js</h3>
        </div></a>
        
    
        
        <a href="/jekyll-part2"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-jekyll-2.jpg'>
            <h3 class="read-another">Strange case of Dr Jekyll and Mr Windows / Part II</h3>
        </div></a>
        
    
        
    
        
    
        
    
        
    
</div> 
</footer>

    <script src='/js/vendor/modernizr.custom.32229-2.8-respondjs-1-4-2.js'></script>
    <script src="/js/vendor/jquery-1.11.2.min.js"></script>
    <script src='/js/vendor/jquery.jpanelmenu.min.js'></script>
    <script type='application/javascript' src='/js/vendor/fastclick.min.js'></script>
    
    <script src=' /js/main.js'></script>
    <script id="dsq-count-scr" src="//just-sudo-it.disqus.com/count.js" async></script>
  </body>

</html>
